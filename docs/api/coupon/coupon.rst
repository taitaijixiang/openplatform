
优惠券
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>

优惠券核销
::::::::::::::::::::::::::::::::::::

该接口是在通过点评发放优惠券后，点评用户通过该优惠券在合作方消费后，合作方将券信息传送给点评，通知点评该优惠券被消费，以核销掉该优惠券。


**请求地址** ::
    
    /api/coupon/consumeCoupon
 
**HTTP方法** ::

    GET POST
    
**对应SDK Bean** ::

    GroupCouponRequest
    
**URL参数**

+-------------+--------+----------+-------------------------------------------------------------+
| 参数名      | 类型   | 是否必须 | 描述                                                        |
+=============+========+==========+=============================================================+
| couponCode  | string | 是       | 优惠券券号,使用多张的话，使用List转JSON，如:["DP85","DP95"] |
+-------------+--------+----------+-------------------------------------------------------------+
| shopName    | string | 是       | 品牌名称                                                    |
+-------------+--------+----------+-------------------------------------------------------------+
| consumeTime | long   | 是       | 优惠券消费时间                                              |
+-------------+--------+----------+-------------------------------------------------------------+
| orderId     | string | 是       | 订单编号                                                    |
+-------------+--------+----------+-------------------------------------------------------------+
| comments    | string | 否       | 备注信息                                                    |
+-------------+--------+----------+-------------------------------------------------------------+
| orderAmount | double | 是       | 订单原始金额                                                |
+-------------+--------+----------+-------------------------------------------------------------+
| payAmount   | double | 是       | 订单支付金额                                                |
+-------------+--------+----------+-------------------------------------------------------------+
| freightFee  | double | 是       | 订单运费                                                    |
+-------------+--------+----------+-------------------------------------------------------------+
| attributes  | map    | 是       | 订单属性                                                    |
+-------------+--------+----------+-------------------------------------------------------------+



**返回示例**

成功 ::

    {"status":"success"}

失败 ::

    {"status":"error", "code":"3001001", "message":"订单号重复"}
    
**错误码一览表**

+---------+------------+
| code    | message    |
+=========+============+
| 3001001 | 订单号重复 |
+---------+------------+


--------------------------------------------------------------------


优惠券分次核销
::::::::::::::::::::::::::::::::::::

该接口是在通过点评发放优惠券后，点评用户通过该优惠券在合作方消费后，合作方将券信息传送给点评，通知点评该优惠券被消费，以核销掉该优惠券。
该接口和优惠券核销接口功能相同，只是因为合作方的特性，分步骤进行核销。

1. 优惠券核心信息核销
#. 优惠券附属信息核销

优惠券核心信息核销
''''''''''''''''''''''''''''''''''''

该接口通知点评该优惠券被消费，具体的订单信息在优惠券附属信息核销接口的调用通知点评。

**请求地址** ::
    
    /api/coupon/consumeCoreCoupon
 
**HTTP方法** ::

    GET POST
    
**对应SDK Bean** ::

    GroupCoreCouponRequest
    
**URL参数**

+-------------+--------+----------+------------+
| 参数名      | 类型   | 是否必须 | 描述       |
+=============+========+==========+============+
| couponCode  | string | 是       | 优惠券券号 |
+-------------+--------+----------+------------+
| consumeTime | long   | 是       | 优惠券消   |
+-------------+--------+----------+------------+


**返回示例**

成功 ::

    {"status":"success"}

失败 ::

    {"status":"error", "code":"3001001", "message":"订单号重复"}
    
**错误码一览表**

+---------+------------+
| code    | message    |
+=========+============+
| 3001001 | 订单号重复 |
+---------+------------+

--------------------------------------------------------------------

优惠券附属信息核销
''''''''''''''''''''''''''''''''''''

该接口适合优惠券核心信息核销搭配使用的，在orderId和couponCode通知点评后，后续把点评会员使用该优惠券消费的详细信息通知点评。

**请求地址** ::
    
    /api/coupon/consumeExtendCoupon
 
**HTTP方法** ::

    GET POST
    
**对应SDK Bean** ::

    GroupExtendCouponRequest
    
**URL参数**

+-------------+--------+----------+----------------+
| 参数名      | 类型   | 是否必须 | 描述           |
+=============+========+==========+================+
| couponCode  | string | 是       | 优惠券券号     |
+-------------+--------+----------+----------------+
| shopName    | string | 是       | 品牌名称       |
+-------------+--------+----------+----------------+
| consumeTime | long   | 是       | 优惠券消费时间 |
+-------------+--------+----------+----------------+
| orderId     | string | 是       | 订单编号       |
+-------------+--------+----------+----------------+
| comments    | string | 否       | 备注信息       |
+-------------+--------+----------+----------------+
| orderAmount | double | 是       | 订单原始金额   |
+-------------+--------+----------+----------------+
| payAmount   | double | 是       | 订单支付金额   |
+-------------+--------+----------+----------------+
| freightFee  | double | 是       | 订单运费       |
+-------------+--------+----------+----------------+
| attributes  | map    | 是       | 订单属性       |
+-------------+--------+----------+----------------+


**返回示例**

成功 ::

    {"status":"success"}

失败 ::

    {"status":"error", "code":"3001002", "message":"订单号不存在,请确认订单号是否正确"}
    
**错误码一览表**

+---------+-----------------------------------+
| code    | message                           |
+=========+===================================+
| 3001002 | 订单号不存在,请确认订单号是否正确 |
+---------+-----------------------------------+
| 3001003 | 优惠券券号不一致，请确认          |
+---------+-----------------------------------+


--------------------------------------------------------------------


优惠券核销和退货统一接口
::::::::::::::::::::::::::::::::::::

该接口是将优惠券核销接口与退货接口合二为一，当orderId不存在的时候，就是核销优惠券，当orderId存在的时候，则是退货。

**请求地址** ::
    
    /api/coupon/consumeCouponOrder
 
**HTTP方法** ::

    GET POST
    
**对应SDK Bean** ::

    GroupCouponOrderRequest
    
**URL参数**

+-------------+--------+----------+--------------+
| 参数名      | 类型   | 是否必须 | 描述         |
+=============+========+==========+==============+
| couponCode  | string | 否       | 优惠券券号   |
+-------------+--------+----------+--------------+
| orderId     | string | 是       | 订单编号     |
+-------------+--------+----------+--------------+
| shopName    | string | 是       | 品牌名称     |
+-------------+--------+----------+--------------+
| consumeTime | long   | 是       | 订单时间     |
+-------------+--------+----------+--------------+
| comments    | string | 否       | 备注信息     |
+-------------+--------+----------+--------------+
| orderAmount | double | 否       | 订单原始金额 |
+-------------+--------+----------+--------------+
| payAmount   | double | 是       | 订单支付金额 |
+-------------+--------+----------+--------------+
| freightFee  | double | 否       | 订单运费     |
+-------------+--------+----------+--------------+
| attributes  | map    | 否       | 订单属性     |
+-------------+--------+----------+--------------+


**返回示例**

成功 ::

    {"status":"success"}

失败 ::

    {"status":"error", "code":"3002001", "message":"订单号不存在,请确认订单号是否正确"}
    
**错误码一览表**

+---------+-----------------------------+
| code    | message                     |
+=========+=============================+
| 3002002 | 请先完善订单信息,再尝试操作 |
+---------+-----------------------------+


--------------------------------------------------------------------

